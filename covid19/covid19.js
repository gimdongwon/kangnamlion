const scriptName = 'covid';
/**
 * (string) room
 * (string) sender
 * (boolean) isGroupChat
 * (void) replier.reply(message)
 * (boolean) replier.reply(room, message, hideErrorToast = false) // ì „ì†¡ ì„±ê³µì‹œ true, ì‹¤íŒ¨ì‹œ false ë°˜í™˜
 * (string) imageDB.getProfileBase64()
 * (string) packageName
 */

function response(room, msg, sender, isGroupChat, replier, imageDB, packageName) {
  if (msg.startsWith('ì½”ë¡œë‚˜')) {
    if (msg == 'ì½”ë¡œë‚˜') return replier.reply(`[í•œêµ­]\n${Covid(country['í•œêµ­'])}`);

    if (country[msg.substr(4)] == undefined) {
      return replier.reply(
        `${msg.substr(4)
        }ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ëŠ” êµ­ê°€ì…ë‹ˆë‹¤!${
          '\u200b'.repeat(500)
        }\n\nêµ­ê°€ì´ë¦„:\n\n${
          Object.keys(country).sort().join('\n\n')}`,
      );
    }
    return replier.reply(`[${msg.substr(4)}]\n${Covid(country[msg.substr(4)])}`);
  }
}

/*
 * Â© 2021 kaan, All rights reserved.
 * ê²Œì‹œê¸€ì— â¤ì™€ ëŒ“ê¸€ì€ í° í˜ì´ ë©ë‹ˆë‹¤ğŸ”¥
 * https://blog.naver.com/junyoungbae02/222382072147
 * ì•Œë¦¼êµ¬ì¡° ë³€ê²½ ëŒ€ì‘ì†ŒìŠ¤ ì¶œì²˜ : https://cafe.naver.com/nameyee/38636
 */

function Covid(country) {
  /*
   * ë°ì´í„° ì¶œì²˜: https://coronaboard.kr/
   */
  const data = JSON.parse(
    org.jsoup.Jsoup.connect(`https://coronaboard.kr/generated/${country}.json`)
      .ignoreContentType(true)
      .get()
      .text(),
  );
  for (const i in data) data[i] = data[i].reverse();
  return (
    `Â· í™•ì§„ì: ${
      data.confirmed_acc[0]
    } (+${
      data.confirmed[0]
    })\nÂ· ì‚¬ë§ì: ${
      data.death_acc[0]
    } (+${
      data.death[0]
    })\nÂ· ì™„ì¹˜: ${
      data.released_acc[0]
    } (+${
      data.released[0]
    })`
  );
}

const country = {
  ë¯¸êµ­: 'US',
  ì˜êµ­: 'GB',
  í•œêµ­: 'KR',
  ì¼ë³¸: 'JP',
  ì¤‘êµ­: 'CN',
  í”„ë‘ìŠ¤: 'FR',
  ëŸ¬ì‹œì•„: 'RU',
  ë…ì¼: 'DE',
  ì¸ë„: 'IN',
  ë¸Œë¼ì§ˆ: 'BR',
  í„°í‚¤: 'TR',
  ì´íƒˆë¦¬ì•„: 'IT',
  ì•„ë¥´í—¨í‹°ë‚˜: 'AR',
  ìŠ¤í˜ì¸: 'ES',
  ì½œë¡¬ë¹„ì•„: 'CO',
  ì´ë€: 'IR',
  í´ë€ë“œ: 'PL',
  ë©•ì‹œì½”: 'MX',
  ìš°í¬ë¼ì´ë‚˜: 'UA',
  í˜ë£¨: 'PE',
  ì¸ë„ë„¤ì‹œì•„: 'ID',
  'ë‚¨ì•„í”„ë¦¬ì¹´ ê³µí™”êµ­': 'ZA',
  ì²´ì½”: 'CZ',
  ë„¤ëœë€ë“œ: 'NL',
  ì¹ ë ˆ: 'CL',
  ìºë‚˜ë‹¤: 'CA',
  í•„ë¦¬í•€: 'PH',
  ì´ë¼í¬: 'IQ',
  ë£¨ë§ˆë‹ˆì•„: 'RO',
  ìŠ¤ì›¨ë´: 'SE',
  ë²¨ê¸°ì—: 'BE',
  íŒŒí‚¤ìŠ¤íƒ„: 'PK',
  í¬ë¥´íˆ¬ê°ˆ: 'PT',
  ì´ìŠ¤ë¼ì—˜: 'IL',
  í—ê°€ë¦¬: 'HU',
  ë°©ê¸€ë¼ë°ì‹œ: 'BD',
  ìš”ë¥´ë‹¨: 'JO',
  ì„¸ë¥´ë¹„ì•„: 'RS',
  ìŠ¤ìœ„ìŠ¤: 'CH',
  ì˜¤ìŠ¤íŠ¸ë¦¬ì•„: 'AT',
  ë§ë ˆì´ì‹œì•„: 'MY',
  ì•„ëì—ë¯¸ë ˆì´íŠ¸: 'AE',
  ë„¤íŒ”: 'NP',
  ë ˆë°”ë…¼: 'LB',
  ëª¨ë¡œì½”: 'MA',
  ì‚¬ìš°ë””ì•„ë¼ë¹„ì•„: 'SA',
  ì—ì½°ë„ë¥´: 'EC',
  ë¶ˆê°€ë¦¬ì•„: 'BG',
  ê·¸ë¦¬ìŠ¤: 'GR',
  ë²¨ë¼ë£¨ìŠ¤: 'BY',
  ìŠ¬ë¡œë°”í‚¤ì•„: 'SK',
  ì¹´ìíìŠ¤íƒ„: 'KZ',
  íŒŒë‚˜ë§ˆ: 'PA',
  ë³¼ë¦¬ë¹„ì•„: 'BO',
  íŒŒë¼ê³¼ì´: 'PY',
  í¬ë¡œì•„í‹°ì•„: 'HR',
  íŠ€ë‹ˆì§€: 'TN',
  ì¡°ì§€ì•„: 'GE',
  ì•„ì œë¥´ë°”ì´ì”: 'AZ',
  ì½”ìŠ¤íƒ€ë¦¬ì¹´: 'CR',
  ì¿ ì›¨ì´íŠ¸: 'KW',
  íŒ”ë ˆìŠ¤íƒ€ì¸: 'PS',
  ìš°ë£¨ê³¼ì´: 'UY',
  'ë„ë¯¸ë‹ˆì¹´ ê³µí™”êµ­': 'DO',
  ë´ë§ˆí¬: 'DK',
  ë¦¬íˆ¬ì•„ë‹ˆì•„: 'LT',
  ì—í‹°ì˜¤í”¼ì•„: 'ET',
  ì´ì§‘íŠ¸: 'EG',
  ì•„ì¼ëœë“œ: 'IE',
  ê³¼í…Œë§ë¼: 'GT',
  ëª°ë„ë°”: 'MD',
  ìŠ¬ë¡œë² ë‹ˆì•„: 'SI',
  ë°”ë ˆì¸: 'BH',
  ì˜¨ë‘ë¼ìŠ¤: 'HN',
  ë² ë„¤ìˆ˜ì—˜ë¼: 'VE',
  ì•„ë¥´ë©”ë‹ˆì•„: 'AM',
  ì˜¤ë§Œ: 'OM',
  ì¹´íƒ€ë¥´: 'QA',
  'ë³´ìŠ¤ë‹ˆì•„ í—¤ë¥´ì²´ê³ ë¹„ë‚˜': 'BA',
  ìŠ¤ë¦¬ë‘ì¹´: 'LK',
  ë¦¬ë¹„ì•„: 'LY',
  ì¼€ëƒ: 'KE',
  ë‚˜ì´ì§€ë¦¬ì•„: 'NG',
  íƒœêµ­: 'TH',
  ë¶ë§ˆì¼€ë„ë‹ˆì•„: 'MK',
  ì¿ ë°”: 'CU',
  ë¯¸ì–€ë§ˆ: 'MM',
  ë¼íŠ¸ë¹„ì•„: 'LV',
  ì•Œë°”ë‹ˆì•„: 'AL',
  ì—ìŠ¤í† ë‹ˆì•„: 'EE',
  ì•Œì œë¦¬: 'DZ',
  ë…¸ë¥´ì›¨ì´: 'NO',
  ì½”ì†Œë³´: 'XK',
  í‚¤ë¥´ê¸°ìŠ¤ìŠ¤íƒ„: 'KG',
  ìš°ì¦ˆë² í‚¤ìŠ¤íƒ„: 'UZ',
  ëª¬í…Œë„¤ê·¸ë¡œ: 'ME',
  ì ë¹„ì•„: 'ZM',
  ê°€ë‚˜: 'GH',
  í•€ë€ë“œ: 'FI',
  ì¹´ë©”ë£¬: 'CM',
  ì•„í”„ê°€ë‹ˆìŠ¤íƒ„: 'AF',
  ì—˜ì‚´ë°”ë„ë¥´: 'SV',
  í‚¤í”„ë¡œìŠ¤: 'CY',
  ëª¨ì ë¹„í¬: 'MZ',
  ë£©ì…ˆë¶€ë¥´í¬: 'LU',
  ëª°ë””ë¸Œ: 'MV',
  ì‹±ê°€í¬ë¥´: 'SG',
  ëª½ê³¨: 'MN',
  ë‚˜ë¯¸ë¹„ì•„: 'NA',
  ë³´ì¸ ì™€ë‚˜: 'BW',
  ìš°ê°„ë‹¤: 'UG',
  ìë©”ì´ì¹´: 'JM',
  ì½”íŠ¸ë””ë¶€ì•„ë¥´: 'CI',
  ì„¸ë„¤ê°ˆ: 'SN',
  ë§ˆë‹¤ê°€ìŠ¤ì¹´ë¥´: 'MG',
  ì§ë°”ë¸Œì›¨: 'ZW',
  ìˆ˜ë‹¨: 'SD',
  ì•™ê³¨ë¼: 'AO',
  ë§ë¼ìœ„: 'MW',
  ì½©ê³ ë¯¼ì£¼ê³µí™”êµ­: 'CD',
  ìº„ë³´ë””ì•„: 'KH',
  'ëª°íƒ€ ê³µí™”êµ­': 'MT',
  ì¹´ë³´ë² ë¥´ë°: 'CV',
  í˜¸ì£¼: 'AU',
  ë¥´ì™„ë‹¤: 'RW',
  ë ˆìœ„ë‹ˆì˜¹: 'RE',
  ì‹œë¦¬ì•„: 'SY',
  ê°€ë´‰: 'GA',
  'íŠ¸ë¦¬ë‹ˆë‹¤ë“œ í† ë°”ê³ ': 'TT',
  'í”„ë‘ìŠ¤ë ¹ ê¸°ì•„ë‚˜': 'GF',
  ê¸°ë‹ˆ: 'GN',
  ë§ˆìš”íŠ¸: 'YT',
  ëª¨ë¦¬íƒ€ë‹ˆ: 'MR',
  'í”„ë‘ìŠ¤ë ¹ í´ë¦¬ë„¤ì‹œì•„': 'PF',
  ì—ìŠ¤ì™€í‹°ë‹ˆ: 'SZ',
  ê¸°ë‹ˆì•„ë‚˜: 'GY',
  ê³¼ë“¤ë£¨í”„: 'GP',
  íŒŒí‘¸ì•„ë‰´ê¸°ë‹ˆ: 'PG',
  ìˆ˜ë¦¬ë‚¨: 'SR',
  ì•„ì´í‹°: 'HT',
  ì†Œë§ë¦¬ì•„: 'SO',
  ë§ë¦¬: 'ML',
  ì•ˆë„ë¼: 'AD',
  í† ê³ : 'TG',
  ë¶€ë¥´í‚¤ë‚˜íŒŒì†Œ: 'BF',
  íƒ€ì§€í‚¤ìŠ¤íƒ„: 'TJ',
  ë²¨ë¦¬ì¦ˆ: 'BZ',
  í€´ë¼ì†Œ: 'CW',
  ë§ˆë¥´í‹°ë‹ˆí¬: 'MQ',
  ë°”í•˜ë§ˆ: 'BS',
  í™ì½©: 'HK',
  ì½©ê³ ê³µí™”êµ­: 'CG',
  ì„¸ì´ì…¸: 'SC',
  ì§€ë¶€í‹°: 'DJ',
};
